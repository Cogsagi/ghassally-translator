<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ghassally Translator - Gnomish Dialect of Khazalid</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        const GhassallyTranslator = () => {
            const [input, setInput] = useState('');
            const [currentPhrase, setCurrentPhrase] = useState(null);
            const [showGrammarGuide, setShowGrammarGuide] = useState(false);

            // Lexicon with proper Khazalid grammar
            const lexicon = {
                // Pronouns
                'i': { ghassally: 'il', pronunciation: 'eel' },
                'you': { ghassally: 'ut', pronunciation: 'oot' },
                'we': { ghassally: 'wen', pronunciation: 'wen' },
                'they': { ghassally: 'theyi', pronunciation: 'THAY-ee' },
                'he': { ghassally: 'ul', pronunciation: 'ool' },
                'she': { ghassally: 'ula', pronunciation: 'OO-lah' },
                'it': { ghassally: 'iz', pronunciation: 'iz' },
                
                // Articles
                'the': { ghassally: 'a', pronunciation: 'ah' },
                'a': { ghassally: 'un', pronunciation: 'un' },
                'an': { ghassally: 'un', pronunciation: 'un' },
                
                // To Be
                'am': { ghassally: 'armi', pronunciation: 'AR-mee' },
                'is': { ghassally: 'armi', pronunciation: 'AR-mee' },
                'are': { ghassally: 'armi', pronunciation: 'AR-mee' },
                'was': { ghassally: 'urzi', pronunciation: 'UR-zee' },
                'were': { ghassally: 'urzi', pronunciation: 'UR-zee' },
                'be': { ghassally: 'arma', pronunciation: 'AR-mah' },
                
                // Modals
                'will': { ghassally: 'an', pronunciation: 'an' },
                'would': { ghassally: 'voldi', pronunciation: 'VOL-dee' },
                'can': { ghassally: 'kanni', pronunciation: 'KAN-nee' },
                'could': { ghassally: 'kannid', pronunciation: 'KAN-nid' },
                'have': { ghassally: 'havi', pronunciation: 'HAH-vee' },
                'has': { ghassally: 'havi', pronunciation: 'HAH-vee' },
                'had': { ghassally: 'havid', pronunciation: 'HAH-vid' },
                
                // Prepositions
                'in': { ghassally: 'a', pronunciation: 'ah' },
                'on': { ghassally: 'op', pronunciation: 'op' },
                'at': { ghassally: 'at', pronunciation: 'at' },
                'to': { ghassally: 'til', pronunciation: 'til' },
                'for': { ghassally: 'for', pronunciation: 'for' },
                'of': { ghassally: 'a', pronunciation: 'ah' },
                'with': { ghassally: 'a', pronunciation: 'ah' },
                'from': { ghassally: 'fra', pronunciation: 'frah' },
                'by': { ghassally: 'bi', pronunciation: 'bee' },
                
                // Conjunctions
                'and': { ghassally: 'ok', pronunciation: 'ok' },
                'or': { ghassally: 'bar', pronunciation: 'bar' },
                'but': { ghassally: 'bar', pronunciation: 'bar' },
                'if': { ghassally: 'om', pronunciation: 'om' },
                'when': { ghassally: 'kvan', pronunciation: 'kvan' },
                'why': { ghassally: 'kvarfor', pronunciation: 'kvar-FOR' },
                
                // Negation
                'not': { ghassally: 'nai', pronunciation: 'nigh' },
                'no': { ghassally: 'nai', pronunciation: 'nigh' },
                'yes': { ghassally: 'ai', pronunciation: 'eye' },
                
                // Gnome-specific
                'gnome': { ghassally: 'gnomaz', pronunciation: 'GNOH-maz' },
                'gnomes': { ghassally: 'gnomi', pronunciation: 'GNOH-mee' },
                'clan': { ghassally: 'throngaz', pronunciation: 'THROHN-gaz' },
                'clans': { ghassally: 'throngi', pronunciation: 'THROHN-gee' },
                
                // Shadow & Illusion
                'shadow': { ghassally: 'mhornaz', pronunciation: 'MOR-naz' },
                'shadows': { ghassally: 'mhorni', pronunciation: 'MOR-nee' },
                'hide': { ghassally: 'mhornit', pronunciation: 'MOR-nit' },
                'hidden': { ghassally: 'mhorned', pronunciation: 'MOR-ned' },
                'illusion': { ghassally: 'svellaz', pronunciation: 'SVELL-az' },
                'illusions': { ghassally: 'svelli', pronunciation: 'SVELL-ee' },
                'trick': { ghassally: 'svellit', pronunciation: 'SVELL-it' },
                'tricked': { ghassally: 'svelled', pronunciation: 'SVELL-ed' },
                'trickster': { ghassally: 'svellazi', pronunciation: 'svell-AH-zee' },
                'mist': { ghassally: 'nebaz', pronunciation: 'NEH-baz' },
                
                // Nature
                'fire': { ghassally: 'zharraz', pronunciation: 'ZHAR-raz' },
                'stone': { ghassally: 'karaz', pronunciation: 'KAR-az' },
                'stones': { ghassally: 'kari', pronunciation: 'KAR-ee' },
                'mountain': { ghassally: 'karazz', pronunciation: 'kah-RAZZ' },
                'water': { ghassally: 'aquaz', pronunciation: 'AH-kwaz' },
                'wind': { ghassally: 'vindaz', pronunciation: 'VIN-daz' },
                'winds': { ghassally: 'vindi', pronunciation: 'VIN-dee' },
                'dark': { ghassally: 'dumbrak', pronunciation: 'DOOM-brak' },
                'light': { ghassally: 'luccaz', pronunciation: 'LOO-kaz' },
                'moon': { ghassally: 'lunaz', pronunciation: 'LOO-naz' },
                'star': { ghassally: 'stellaz', pronunciation: 'STELL-az' },
                'stars': { ghassally: 'stelli', pronunciation: 'STELL-ee' },
                
                // Dwarfs
                'dwarf': { ghassally: 'dawaz', pronunciation: 'DAH-waz' },
                'dwarfs': { ghassally: 'dawi', pronunciation: 'DAH-wee' },
                'cousin': { ghassally: 'kumaz', pronunciation: 'KOO-maz' },
                'kin': { ghassally: 'kinaz', pronunciation: 'KIN-az' },
                'beard': { ghassally: 'tromaz', pronunciation: 'TROH-maz' },
                
                // Verbs
                'see': { ghassally: 'okrit', pronunciation: 'OH-krit' },
                'saw': { ghassally: 'okred', pronunciation: 'OH-kred' },
                'walk': { ghassally: 'strolit', pronunciation: 'STROH-lit' },
                'go': { ghassally: 'git', pronunciation: 'git' },
                'went': { ghassally: 'ged', pronunciation: 'ged' },
                'come': { ghassally: 'komit', pronunciation: 'KOH-mit' },
                'make': { ghassally: 'makkit', pronunciation: 'MAH-kit' },
                'made': { ghassally: 'makked', pronunciation: 'MAH-ked' },
                'use': { ghassally: 'brukkit', pronunciation: 'BRUK-kit' },
                'used': { ghassally: 'brukked', pronunciation: 'BRUK-ked' },
                'know': { ghassally: 'gnorrit', pronunciation: 'GNOR-rit' },
                'knew': { ghassally: 'gnorred', pronunciation: 'GNOR-red' },
                'think': { ghassally: 'denkit', pronunciation: 'DEN-kit' },
                'speak': { ghassally: 'gassit', pronunciation: 'GAH-sit' },
                'steal': { ghassally: 'skit', pronunciation: 'skit' },
                
                // Magic
                'magic': { ghassally: 'magikaz', pronunciation: 'mah-GIK-az' },
                'spell': { ghassally: 'rhunaz', pronunciation: 'ROO-naz' },
                'power': { ghassally: 'kraftaz', pronunciation: 'KRAF-taz' },
                
                // People
                'human': { ghassally: 'umgaz', pronunciation: 'UM-gaz' },
                'humans': { ghassally: 'umgi', pronunciation: 'UM-gee' },
                'elf': { ghassally: 'elvaz', pronunciation: 'EL-vaz' },
                'elves': { ghassally: 'elvi', pronunciation: 'EL-vee' },
                'orc': { ghassally: 'urkaz', pronunciation: 'UR-kaz' },
                'goblin': { ghassally: 'grobiaz', pronunciation: 'GROH-bee-az' },
                
                // Adjectives
                'good': { ghassally: 'grundak', pronunciation: 'GROON-dak' },
                'bad': { ghassally: 'umgak', pronunciation: 'UM-gak' },
                'best': { ghassally: 'grundazza', pronunciation: 'groon-DAH-zah' },
                'clever': { ghassally: 'gnolak', pronunciation: 'GNOH-lak' },
                'wise': { ghassally: 'gnolak', pronunciation: 'GNOH-lak' },
                'strong': { ghassally: 'durak', pronunciation: 'DUH-rak' },
                'brave': { ghassally: 'galak', pronunciation: 'GAH-lak' },
                'small': { ghassally: 'pikkak', pronunciation: 'PIK-kak' },
                'great': { ghassally: 'grungak', pronunciation: 'GROON-gak' },
                'old': { ghassally: 'gamak', pronunciation: 'GAM-ak' },
                'young': { ghassally: 'jungak', pronunciation: 'YOON-gak' },
                'new': { ghassally: 'nuvak', pronunciation: 'NOO-vak' },
                
                // Common nouns
                'home': { ghassally: 'zakaz', pronunciation: 'ZAH-kaz' },
                'king': { ghassally: 'rikaz', pronunciation: 'RIK-az' },
                'gold': { ghassally: 'goraz', pronunciation: 'GOR-az' },
                'friend': { ghassally: 'drengaz', pronunciation: 'DREN-gaz' },
                'enemy': { ghassally: 'grimaz', pronunciation: 'GRIM-az' },
                'war': { ghassally: 'kazak', pronunciation: 'KAH-zak' },
                'name': { ghassally: 'namaz', pronunciation: 'NAH-maz' },
                'names': { ghassally: 'nami', pronunciation: 'NAH-mee' },
                'our': { ghassally: 'wen', pronunciation: 'wen' },
                
                // Numbers
                'one': { ghassally: 'uni', pronunciation: 'OO-nee' },
                'two': { ghassally: 'dua', pronunciation: 'DOO-ah' },
                'three': { ghassally: 'trei', pronunciation: 'tray' },
                'many': { ghassally: 'mangi', pronunciation: 'MAN-gee' },
            };

            const gnomishPhrases = [
                {
                    common: "The shadow hides what the light reveals.",
                    ghassally: "A mhornaz mhornit kva a luccaz okrit.",
                    pronunciation: "ah MOR-naz MOR-nit kvah ah LOO-kaz OH-krit",
                    context: "Ancient Gnommi proverb about illusion"
                },
                {
                    common: "Never trust a Dwarf's memory of a grudge.",
                    ghassally: "Nai gnorrit dawaz gamla grimaz.",
                    pronunciation: "nigh GNOR-rit DAH-waz GAM-lah GRIM-az",
                    context: "Common saying among the clans"
                },
                {
                    common: "In mist and shadow, we find our strength.",
                    ghassally: "A nebaz ok mhornaz, wen okrit kraftaz.",
                    pronunciation: "ah NEH-baz ok MOR-naz, wen OH-krit KRAF-taz",
                    context: "Traditional Glimdwarrow greeting"
                },
                {
                    common: "The Grey Wind knows our names.",
                    ghassally: "A vindaz dumbrak gnorrit wen nami.",
                    pronunciation: "ah VIN-daz DOOM-brak GNOR-rit wen NAH-mee",
                    context: "Acknowledgment of Gnomes' bond with Ulgu"
                },
                {
                    common: "Small stones can trip giants.",
                    ghassally: "Pikkak kari grimaz grungak urkaz.",
                    pronunciation: "PIK-kak KAR-ee GRIM-az GROON-gak UR-kaz",
                    context: "Gnomish wisdom about leveraging size"
                },
            ];

            const getRandomPhrase = () => {
                const randomIndex = Math.floor(Math.random() * gnomishPhrases.length);
                setCurrentPhrase(gnomishPhrases[randomIndex]);
            };

            useEffect(() => {
                getRandomPhrase();
            }, []);

            const translateWord = (word) => {
                const lowerWord = word.toLowerCase().trim();
                
                if (lexicon[lowerWord]) {
                    return {
                        translation: lexicon[lowerWord].ghassally,
                        pronunciation: lexicon[lowerWord].pronunciation
                    };
                }
                
                // Auto-generate plurals
                if (lowerWord.endsWith('s') && lowerWord.length > 2) {
                    const singular = lowerWord.slice(0, -1);
                    if (lexicon[singular]) {
                        const root = lexicon[singular].ghassally.replace(/(az|ak|it)$/, '');
                        return {
                            translation: root + 'i',
                            pronunciation: lexicon[singular].pronunciation + '-ee'
                        };
                    }
                }
                
                // Auto-generate verb forms
                if (lowerWord.endsWith('ing')) {
                    const base = lowerWord.slice(0, -3);
                    if (lexicon[base]) {
                        return {
                            translation: lexicon[base].ghassally,
                            pronunciation: lexicon[base].pronunciation
                        };
                    }
                }
                
                return {
                    translation: lowerWord,
                    pronunciation: '(unknown)'
                };
            };

            const translateSentence = (text) => {
                const words = text.toLowerCase().split(/\s+/);
                const translations = [];
                const pronunciations = [];
                
                words.forEach(word => {
                    const cleanWord = word.replace(/[.,!?;:]/g, '');
                    const result = translateWord(cleanWord);
                    const punctuation = word.match(/[.,!?;:]$/);
                    const finalWord = punctuation ? result.translation + punctuation[0] : result.translation;
                    
                    translations.push(finalWord);
                    pronunciations.push(result.pronunciation);
                });
                
                return {
                    translation: translations.join(' '),
                    pronunciation: pronunciations.join(' ')
                };
            };

            const formatPronunciation = (pronunciation) => {
                if (!pronunciation) return null;
                
                const parts = pronunciation.split(' ');
                return parts.map((part, idx) => {
                    const segments = part.split(/([A-Z][A-Z-]*)/g).filter(Boolean);
                    
                    return React.createElement('span', { key: idx, className: 'inline-block mr-2' },
                        segments.map((seg, segIdx) => {
                            if (/^[A-Z][A-Z-]*$/.test(seg)) {
                                return React.createElement('span', { key: segIdx, className: 'text-amber-300 font-semibold' }, seg);
                            }
                            return React.createElement('span', { key: segIdx, className: 'text-slate-400' }, seg);
                        })
                    );
                });
            };

            const formatGhassally = (translation, pronunciation) => {
                if (!translation || !pronunciation) return translation;
                
                const transWords = translation.split(' ');
                const pronWords = pronunciation.split(' ');
                
                return transWords.map((word, idx) => {
                    const pron = pronWords[idx];
                    if (!pron || pron === '(unknown)') {
                        return React.createElement('span', { key: idx, className: 'mr-2' }, word);
                    }
                    
                    const cleanWord = word.replace(/[.,!?;:]$/, '');
                    const punctuation = word.match(/[.,!?;:]$/)?.[0] || '';
                    const wordLower = cleanWord.toLowerCase();
                    
                    const stressMatches = pron.match(/[A-Z][A-Z-]*/g);
                    if (!stressMatches) {
                        return React.createElement('span', { key: idx, className: 'mr-2' }, word);
                    }
                    
                    const phonemeMap = {
                        'gnoh': 'gno', 'mhor': 'mhor', 'svell': 'svell', 'dah': 'da',
                        'ar': 'ar', 'groon': 'grun', 'bruk': 'bruk', 'zhar': 'zhar',
                        'eel': 'il', 'duh': 'du', 'kvar': 'kvar', 'ah': 'a',
                        'vin': 'vin', 'doom': 'dumb', 'gnor': 'gnor', 'nah': 'na',
                    };
                    
                    let stressIndex = -1;
                    let stressLength = 0;
                    const primaryStress = stressMatches[0].toLowerCase().replace(/-/g, '');
                    
                    stressIndex = wordLower.indexOf(primaryStress);
                    if (stressIndex !== -1) {
                        stressLength = primaryStress.length;
                    } else {
                        for (const [sound, spelling] of Object.entries(phonemeMap)) {
                            if (primaryStress.startsWith(sound)) {
                                stressIndex = wordLower.indexOf(spelling);
                                if (stressIndex !== -1) {
                                    stressLength = spelling.length;
                                    break;
                                }
                            }
                        }
                    }
                    
                    if (stressIndex !== -1 && stressLength > 0) {
                        const before = cleanWord.slice(0, stressIndex);
                        const stressed = cleanWord.slice(stressIndex, stressIndex + stressLength);
                        const after = cleanWord.slice(stressIndex + stressLength);
                        
                        return React.createElement('span', { key: idx, className: 'mr-2' },
                            React.createElement('span', { className: 'text-amber-100/70' }, before),
                            React.createElement('span', { className: 'text-amber-200 font-semibold' }, stressed),
                            React.createElement('span', { className: 'text-amber-100/70' }, after),
                            punctuation
                        );
                    }
                    
                    return React.createElement('span', { key: idx, className: 'mr-2' }, word);
                });
            };

            const liveResult = input.trim() ? translateSentence(input) : { translation: '', pronunciation: '' };

            return React.createElement('div', { className: 'min-h-screen bg-gradient-to-br from-slate-800 via-slate-700 to-stone-700 p-6' },
                React.createElement('div', { className: 'max-w-6xl mx-auto' },
                    // Header
                    React.createElement('div', { className: 'text-center mb-8' },
                        React.createElement('h1', { className: 'text-4xl font-bold text-amber-400 mb-2' }, 'Ghassally Translator'),
                        React.createElement('p', { className: 'text-slate-300 italic' }, 'Gnomish Dialect of Khazalid'),
                        React.createElement('p', { className: 'text-sm text-slate-400 mt-2' }, 'Grammar-accurate translation following Khazalid signifier rules')
                    ),

                    // Gnomish Phrase
                    currentPhrase && React.createElement('div', { className: 'bg-gradient-to-r from-slate-900 to-slate-800 rounded-lg shadow-xl p-6 mb-6 border border-amber-900/30' },
                        React.createElement('div', { className: 'flex items-start gap-3' },
                            React.createElement('div', { className: 'text-amber-500 text-2xl mt-1' }, '✦'),
                            React.createElement('div', { className: 'flex-1' },
                                React.createElement('h3', { className: 'text-amber-300 font-semibold mb-3 text-sm uppercase tracking-wide' }, 'Gnomish Wisdom'),
                                React.createElement('p', { className: 'text-slate-300 italic mb-2' }, `"${currentPhrase.common}"`),
                                React.createElement('p', { className: 'text-amber-100 font-serif text-lg mb-2' }, currentPhrase.ghassally),
                                React.createElement('p', { className: 'text-slate-400 text-sm font-mono mb-3' }, currentPhrase.pronunciation),
                                React.createElement('p', { className: 'text-slate-500 text-xs italic' }, `— ${currentPhrase.context}`)
                            ),
                            React.createElement('div', { className: 'text-amber-500 text-2xl mt-1' }, '✦')
                        )
                    ),

                    // Translation Panel
                    React.createElement('div', { className: 'bg-slate-900 rounded-lg shadow-xl p-6 mb-6' },
                        React.createElement('div', { className: 'grid md:grid-cols-2 gap-6' },
                            // Input
                            React.createElement('div', null,
                                React.createElement('label', { className: 'block text-amber-300 font-semibold mb-2' }, 'Reikspiel (Common)'),
                                React.createElement('textarea', {
                                    value: input,
                                    onChange: (e) => setInput(e.target.value),
                                    placeholder: 'Type to translate...',
                                    className: 'w-full h-48 p-4 bg-slate-800 text-slate-100 border border-slate-600 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent resize-none'
                                })
                            ),
                            // Output
                            React.createElement('div', null,
                                React.createElement('label', { className: 'block text-amber-300 font-semibold mb-2' }, 'Ghassally (Gnomish)'),
                                React.createElement('div', { className: 'w-full h-48 p-4 bg-slate-800 rounded-lg border border-amber-900/30 overflow-y-auto' },
                                    liveResult.translation ?
                                        React.createElement('p', { className: 'text-amber-100 text-lg font-serif leading-relaxed' },
                                            formatGhassally(liveResult.translation, liveResult.pronunciation)
                                        ) :
                                        React.createElement('p', { className: 'text-slate-500 italic' }, 'Translation will appear here...')
                                )
                            )
                        )
                    ),

                    // Pronunciation Guide
                    liveResult.pronunciation && React.createElement('div', { className: 'bg-slate-900 rounded-lg shadow-xl p-6 mb-6' },
                        React.createElement('label', { className: 'block text-amber-300 font-semibold mb-2' }, 'Pronunciation Guide:'),
                        React.createElement('div', { className: 'p-4 bg-slate-800 rounded-lg border border-amber-900/30' },
                            React.createElement('p', { className: 'text-lg leading-relaxed font-mono' },
                                formatPronunciation(liveResult.pronunciation)
                            )
                        ),
                        React.createElement('div', { className: 'mt-4 text-sm text-slate-400 space-y-1' },
                            React.createElement('p', null, '• ', React.createElement('span', { className: 'text-amber-300 font-semibold' }, 'Highlighted syllables'), ' are stressed'),
                            React.createElement('p', null, '• \'zh\' = like \'s\' in "measure"'),
                            React.createElement('p', null, '• \'gn\' = soft \'n\' sound (like Italian "gnocchi")'),
                            React.createElement('p', null, '• Roll your R\'s slightly for authenticity')
                        )
                    ),

                    // Quick Reference
                    React.createElement('div', { className: 'bg-slate-900 rounded-lg shadow-xl p-6' },
                        React.createElement('h2', { className: 'text-xl font-bold text-amber-300 mb-4' }, 'Quick Reference'),
                        React.createElement('div', { className: 'grid grid-cols-2 md:grid-cols-3 gap-4 text-sm' },
                            React.createElement('div', null,
                                React.createElement('span', { className: 'text-slate-400' }, 'Gnome: '),
                                React.createElement('span', { className: 'text-amber-100 ml-2 font-semibold' }, 'gnomaz')
                            ),
                            React.createElement('div', null,
                                React.createElement('span', { className: 'text-slate-400' }, 'Shadow: '),
                                React.createElement('span', { className: 'text-amber-100 ml-2 font-semibold' }, 'mhornaz')
                            ),
                            React.createElement('div', null,
                                React.createElement('span', { className: 'text-slate-400' }, 'To hide: '),
                                React.createElement('span', { className: 'text-amber-100 ml-2 font-semibold' }, 'mhornit')
                            ),
                            React.createElement('div', null,
                                React.createElement('span', { className: 'text-slate-400' }, 'Illusion: '),
                                React.createElement('span', { className: 'text-amber-100 ml-2 font-semibold' }, 'svellaz')
                            ),
                            React.createElement('div', null,
                                React.createElement('span', { className: 'text-slate-400' }, 'Clever: '),
                                React.createElement('span', { className: 'text-amber-100 ml-2 font-semibold' }, 'gnolak')
                            ),
                            React.createElement('div', null,
                                React.createElement('span', { className: 'text-slate-400' }, 'Dwarf: '),
                                React.createElement('span', { className: 'text-amber-100 ml-2 font-semibold' }, 'dawaz')
                            )
                        ),
                        React.createElement('div', { className: 'mt-6 p-4 bg-slate-800 rounded-lg border-l-4 border-amber-600' },
                            React.createElement('p', { className: 'text-slate-300 text-sm' },
                                React.createElement('strong', { className: 'text-amber-400' }, 'Grammar Note: '),
                                'Ghassally follows Khazalid\'s root + signifier structure. Use ',
                                React.createElement('span', { className: 'text
